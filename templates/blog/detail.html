{% extends 'base/base.html' %}
{% load i18n cache %}
{% load django_markdown comments %}
{% load gravatar %}

{% block title %}{{ meta.title }}{% endblock %}

{% block container %}
        <div class="container">
            <div class="row">
                <ol class="post-breadcrumb">
                    <li><a href="{% url 'homepage' %}" title="{% trans 'home' %}"><i class="fa fa-home"></i>&nbsp;{% trans 'home' %}</a></li>
                    <li><a href="{% url 'web_blog_list' %}" title="{% trans 'blog' %}"><i class="fa fa-keyboard-o"></i>&nbsp;{% trans 'blog' %}</a></li>
                    <li class="active">{{ object.title }}</li>
                </ol>
            </div>

            <div class="row">
                <div class="col-md-8" >
                    <div class="row">
                        <div class="col-sm-12" id="blog-detail-container" >
                            <h1 class="title">{{ object.title }}</h1>

                            {{ object.content|markdown_safe }}
                        </div>
                    </div>

                    <div class="row post-nav" >
                        <div class="col-sm-6">
                            {% if previous %}
                                <div class="previous">
                                    <a class="btn btn-default" href="{{ previous.get_absolute_url  }}" title="{{ previous.title }}"><i class="fa fa-angle-left"></i>&nbsp;上一篇</a>
                                </div>
{#                            <a class="pull-left" href="{{ previous.get_absolute_url }}" title="{{ previous.title }}">{{ previous }}</a>#}
                            {% endif %}
                        </div>

                        <div class="col-sm-6">
                            {% if next %}
                                <div class="next">
                                    <a class="btn btn-default" href="{{ next.get_absolute_url }}" title="{{ next.title }}">下一篇&nbsp;<i class="fa fa-angle-right"></i></a>
                                </div>
{#                                <a class="pull-right" href="{{ next.get_absolute_url }}" title="{{ next.title }}">{{ next }}</a>#}
                            {% endif %}
                        </div>
                    </div>

                    <div class="row">
                        {% get_comment_count for object as comment_count %}.
                        {% get_comment_list for object as comment_list %}
                        <div class="col-sm-12">
                            <div class="blog-comment">
                                <h3 class="text-success">{% trans 'comments' %}&nbsp;{{ comment_count }}</h3>
                                <hr>
                                <ul class="comments">
                                {% for comment in comment_list %}
                                    <li class="clearfix">
                                        <img src="{% gravatar_url comment.user.email 65 %}" class="avatar" alt="">
                                        <div class="post-comments">
                                            <p class="meta"><a href="#">{{ comment.user }}</a><span class="pull-right">{{ comment.submit_date }}</span></p>
                                            <p>{{ comment.comment }}</p>
                                        </div>
                                    </li>
                                {% endfor %}
                                </ul>
                            </div>
                        </div>

                    </div>
                </div>

                <div class="col-md-4 hidden-xs">
                    {% cache 3600 blog-sidebar %}
                        {% include 'blog/slider/slider.html' %}
                    {% endcache %}
                </div>
            </div>

            {% include 'base/goto-top.html' %}
        </div>

{% endblock %}