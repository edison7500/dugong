{% extends 'base/base.html' %}
{% load bootstrap3 %}
{% load i18n cache %}
{% load django_markdown comments %}
{% load gravatar %}

{% block bootstrap3_title %}{{ meta.title }}{% endblock %}

{% block container %}
        <div class="container">
            <div class="row">
                <ol class="post-breadcrumb">
                    <li><a href="{% url 'homepage' %}" title="{% trans 'home' %}"><i class="fa fa-home"></i>&nbsp;{% trans 'home' %}</a></li>
                    <li><a href="{% url 'web_blog_list' %}" title="{% trans 'blog' %}"><i class="fa fa-keyboard-o"></i>&nbsp;{% trans 'blog' %}</a></li>
                    <li class="active">{{ object.title }}</li>
                </ol>
            </div>

            <div class="row">
                <div class="col-md-8" >
                    <div class="row">
                        <div class="col-sm-12" id="blog-detail-container" >
                            <h1 class="title">{{ object.title }}</h1>
                            <p class="article-meta">
                                <i class="fa fa-clock-o"></i>&nbsp;{{ object.created_date|date:'Y-m-d' }}
                            </p>
                            <hr>

                            <article>
                                {{ object.content|markdown_safe }}
                            </article>

                            <!-- Go to www.addthis.com/dashboard to customize your tools -->
                            <div class="addthis_inline_share_toolbox_2eqs" style="margin-top: 30px;"></div>
                        </div>
                    </div>

                    <div class="row post-nav" >
                        <div class="col-sm-6">
                            {% if previous %}
                                <div class="previous">
                                    <a class="btn btn-default" href="{{ previous.get_absolute_url  }}" title="{{ previous.title }}"><i class="fa fa-angle-left"></i>&nbsp;上一篇</a>
                                </div>
{#                            <a class="pull-left" href="{{ previous.get_absolute_url }}" title="{{ previous.title }}">{{ previous }}</a>#}
                            {% endif %}
                        </div>

                        <div class="col-sm-6">
                            {% if next %}
                                <div class="next">
                                    <a class="btn btn-default" href="{{ next.get_absolute_url }}" title="{{ next.title }}">下一篇&nbsp;<i class="fa fa-angle-right"></i></a>
                                </div>
{#                                <a class="pull-right" href="{{ next.get_absolute_url }}" title="{{ next.title }}">{{ next }}</a>#}
                            {% endif %}
                        </div>
                    </div>

                    <div class="row">
                        {% get_comment_count for object as comment_count %}.
                        {% get_comment_list for object as comment_list %}
                        {% get_comment_form for object as form %}
                        <div class="col-sm-12">
                            <div class="blog-comment">
                                <p class="text-success">{% trans 'comments' %}&nbsp;{{ comment_count }}</p>
                                <hr>
                                <ul class="comments">
                                {% for comment in comment_list %}
                                    <li class="clearfix">
                                        <img src="{% gravatar_url comment.user.email 65 %}" class="avatar" alt="">
                                        <div class="post-comments">
                                            <p class="meta"><a href="#">{{ comment.user }}</a><span class="pull-right">{{ comment.submit_date }}</span></p>
                                            <p>{{ comment.comment }}</p>
                                        </div>
                                    </li>
                                {% endfor %}
                                </ul>
                            </div>
                            {% if user.is_authenticated %}
                                <form class="blog-comment-form" action="{% comment_form_target %}" method="POST">{% csrf_token %}
                                    <fieldset>
                                        <div class="form-group">
                                            {% bootstrap_field form.comment show_label=False placeholder="随便说点。。。" %}
                                        </div>
                                            {{ form.content_type }}
                                            {{ form.object_pk }}
                                            {{ form.timestamp }}
                                            {{ form.security_hash }}
                                    </fieldset>
                                    {% bootstrap_button "提交" button_type="submit" button_class="btn-primary" %}
                                </form>
                            {% else %}
                                <div class="text-center">
                                    <a class="btn btn-primary btn-block" href="{% url 'account_login' %}">{% trans 'Sign In' %}</a>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <div class="col-md-4 hidden-xs">
                    {% cache 3600 blog-sidebar %}
                        {% include 'blog/slider/slider.html' %}
                    {% endcache %}
                </div>
            </div>

            {% include 'base/goto-top.html' %}
        </div>

{% endblock %}